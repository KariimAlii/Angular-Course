<div class="form-container">
  <h1>Create New Post</h1>

  <form [formGroup]="postForm" (ngSubmit)="onSubmit()" novalidate>

    <!-- Title Field -->
    <div class="form-group">
      <label for="title">Title</label>
      <input
        id="title"
        type="text"
        formControlName="title"
        required
        class="form-control"
        [class.invalid]="title?.invalid && (title?.touched || title?.dirty)"
      />
      <div class="error" *ngIf="title?.hasError('required')">
        Title is required
      </div>
      <div class="error" *ngIf="title?.hasError('minlength')">
        Title must be at least 5 characters
      </div>
    </div>

    <!-- Body Field -->
    <div class="form-group">
      <label for="body">Post Content</label>
      <textarea
        id="body"
        rows="5"
        formControlName="body"
        required
        class="form-control"
        [class.invalid]="body?.invalid && (body?.touched || body?.dirty)"
      ></textarea>
      <div class="error" *ngIf="body?.hasError('required')">
        Content is required
      </div>
      <div class="error" *ngIf="body?.hasError('minlength')">
        Content must be at least 20 characters
      </div>
    </div>

    <!-- Form Actions -->
    <div class="form-actions">
      <button
        type="submit"
        [disabled]="postForm.invalid || loading"
      >
        <span *ngIf="!loading">Create Post</span>
        <span *ngIf="loading">Creating...</span>
      </button>

      <button
        type="button"
        (click)="router.navigate(['/posts'])"
      >
        Cancel
      </button>
    </div>

    <!-- Error Message -->
    <div *ngIf="error" class="error-message">
      ❌ {{ error }}
    </div>

    <!-- Success Message -->
    <div *ngIf="success" class="success-message">
      ✅ Post created successfully! Redirecting...
    </div>

  </form>
</div>
